<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <input type="text" id="inputText" placeholder="Enter text to translate" />
    <button id="translateButton">Translate</button>
    
    <script>
        async function translateWord() {
            const text = document.getElementById('inputText').value;
            console.log("text:", text);
            const url = `https://www.bing.com/dict/search?q=${encodeURIComponent(text)}`;
            console.log("@@@@@@!!!!!fetching text & url", text, url);
        
            try {
                const response = await fetch(url, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'text/html'
                    }
                });
        
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
        
                const html = await response.text();
                console.log("response=", response);
                
                // Parse the HTML text to find the translation result
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                // Correct the selector to match the desired elements
                const links = doc.querySelectorAll('span.def.b_regtxt > a');
        
                if (links.length > 0) {
                    // Extract the text content of each 'a' element
                    const words = Array.from(links).map(link => link.textContent);
                    const str = words.join(", ");
                    console.log("Found words:", words);
                    setTranslation(str);
                } else {
                    console.error('The specified elements were not found.');
                    setTranslation("not found!");
                }
            } catch (error) {
                console.error('Error fetching Bing dictionary:', error);
                setTranslation(`Error: ${error.message}`);
            }
        }
        
        // Dummy setTranslation function for demo purposes
        function setTranslation(text) {
            console.log("Translation:", text);
            // You can update the UI or DOM here as needed
        }
        
        // Add event listener to the button
        document.getElementById('translateButton').addEventListener('click', translateWord);
    </script>
</body>
</html>
